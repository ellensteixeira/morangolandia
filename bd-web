CREATE DATABASE WEB_Morangolandia;

USE WEB_Morangolandia;

CREATE TABLE Login(
	Id INT PRIMARY KEY IDENTITY (1,1) NOT NULL,
	UsuarioLogin NVARCHAR(MAX) NOT NULL,
	SenhaLogin NVARCHAR(MAX) NOT NULL,
	UsuarioId INT NOT NULL,
	CONSTRAINT UsuarioId FOREIGN KEY (UsuarioId) REFERENCES Usuarios(Id) 
);

CREATE TABLE Usuarios(
	Id INT PRIMARY KEY IDENTITY (1,1) NOT NULL,
	Nome NVARCHAR(MAX) NOT NULL,
	Usuario NVARCHAR(MAX) NOT NULL,
	Apelido NVARCHAR(MAX) NOT NULL,
	Idade INT NOT NULL,
	Email NVARCHAR(MAX) NOT NULL,
	Senha NVARCHAR(MAX) NOT NULL,
	FotoPerfilCaminho NVARCHAR(MAX) NOT NULL
);

CREATE TABLE Perfil(
	Id INT PRIMARY KEY IDENTITY (1,1) NOT NULL,
	Usuario NVARCHAR(MAX) NOT NULL,
	Apelido NVARCHAR(MAX) NOT NULL,
	Email NVARCHAR(MAX) NOT NULL,
	FotoPerfil NVARCHAR(MAX) NOT NULL,
	UsuarioId INT NOT NULL,
	CONSTRAINT UsuarioId FOREIGN KEY (UsuarioId) REFERENCES Usuarios(Id)
);

CREATE TABLE Receitas(
	Id INT PRIMARY KEY IDENTITY (1,1) NOT NULL,
	Titulo NVARCHAR(MAX) NOT NULL,
	Tipo NVARCHAR(MAX) NOT NULL,
	Nivel INT NOT NULL,
	Ingredientes NVARCHAR(MAX) NOT NULL,
	Descricao NVARCHAR(MAX) NOT NULL,
	DataPostagem DATETIME NOT NULL,
	UsuarioId INT NOT NULL,
	ImagemCaminho NVARCHAR(MAX) NOT NULL
	CONSTRAINT UsuarioId FOREIGN KEY (UsuarioId) REFERENCES Usuarios(Id)
);

CREATE TABLE Salvamentos(
	Id INT PRIMARY KEY IDENTITY (1,1) NOT NULL,
	DataSalvamento DATETIME NOT NULL,
	IdReceita INT NOT NULL,
	IdUsuario INT NOT NULL,
	CONSTRAINT IdReceita FOREIGN KEY (IdReceita) REFERENCES Receitas(Id),
	CONSTRAINT IdUsuario FOREIGN KEY (IdUsuario) REFERENCES Usuarios(Id) 
);

CREATE TABLE Curtidas(
	Id INT PRIMARY KEY IDENTITY (1,1) NOT NULL,
	DataCurtida DATETIME NOT NULL,
	IdReceita INT NOT NULL,
	IdUsuario INT NOT NULL
	CONSTRAINT IdReceita FOREIGN KEY (IdReceita) REFERENCES Receitas(Id),
	CONSTRAINT IdUsuario FOREIGN KEY (IdUsuario) REFERENCES Usuarios(Id) 
);
